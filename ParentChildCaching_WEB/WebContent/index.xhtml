<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	>
<head>
  <title>Parent child caching</title>
  <style>
th, tr, td {
    border: 1px solid black;
}  
  </style>
</head>

<h:body>
<h:form>
	<p:commandButton value="test JPA query" actionListener="#{mainView.test}" update="empTable"/>
	<p/>
	<p:dataTable id="empTable" value="#{mainView.employees}" var="e">
		<p:column headerText="name">
			<h:outputText value="#{e.firstName} #{e.lastName}"/>
		</p:column>
		<p:column headerText="department">
			<h:outputText value="#{e.department.departmentName}"/>
		</p:column>
		<p:column headerText="salary">
			<h:outputText value="#{e.salary}"/>
		</p:column>		
	</p:dataTable>
</h:form>
</h:body>

</html>
